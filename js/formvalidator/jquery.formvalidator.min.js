/**
* jQuery Form Validator
* ------------------------------------------
* Created by Victor Jonsson <http://www.victorjonsson.se>
* Documentation and issue tracking on Github <https://github.com/victorjonsson/jQuery-Form-Validator/>
*
* @license Dual licensed under the MIT or GPL Version 2 licenses
* @version 1.9.1
*/(function(a){a.fn.validateOnBlur=function(b,c){return a(this).find("textarea,input").blur(function(){a(this).doValidate(b,c)}),a(this)},a.fn.showHelpOnFocus=function(b){return b||(b="data-help"),a(this).find("textarea,input").each(function(){var c=a(this).attr(b);c&&a(this).focus(function(){var b=a(this);b.parent().find(".jquery_form_help").length==0&&b.after(a("<span />").addClass("jquery_form_help").text(c).hide().fadeIn())}).blur(function(){a(this).parent().find(".jquery_form_help").fadeOut("slow",function(){a(this).remove()})})}),a(this)},a.fn.doValidate=function(b,c,d){typeof d=="undefined"&&(d=!0);var e=a(this),f={validationRuleAttribute:"data-validation",errorElementClass:"error",borderColorOnError:"red",dateFormat:"yyyy-mm-dd"};c&&a.extend(f,c),b?a.extend(b,a.formUtils.LANG):b=a.formUtils.LANG;var g=e.attr("type");a.formUtils.defaultBorderColor===null&&g!=="submit"&&g!=="checkbox"&&g!=="radio"&&(a.formUtils.defaultBorderColor=e.css("border-color")),e.removeClass(f.errorElementClass).parent().find(".jquery_form_error_message").remove(),f.borderColorOnError!==""&&e.css("border-color",a.formUtils.defaultBorderColor);var h=e.parent();while(h.get(0).nodeName.toLowerCase()!="form")h=h.parent();var i=a.formUtils.validateInput(e,b,f,h);return i===!0?e.unbind("keyup"):(e.addClass(f.errorElementClass).parent().append('<span class="jquery_form_error_message">'+i+"</span>"),f.borderColorOnError!==""&&e.css("border-color",f.borderColorOnError),d&&e.bind("keyup",function(){a(this).doValidate(b,c,!1)})),a(this)},a.fn.validate=function(b,c){var d={ignore:[],errorElementClass:"error",borderColorOnError:"red",errorMessageClass:"jquery_form_error_message",validationRuleAttribute:"data-validation",errorMessagePosition:"top",scrollToTopOnError:!0,dateFormat:"yyyy-mm-dd"};c&&a.extend(d,c),b?a.extend(b,a.formUtils.LANG):b=a.formUtils.LANG;var e=function(a,b){if(b==="submit"||b==="button")return!0;for(var c=0;c<d.ignore.length;c++)if(d.ignore[c]===a)return!0;return!1},f=function(b){a.inArray(b,g)<0&&g.push(b)},g=[],h=[],i=a(this);i.find("input[type=radio],input[type=checkbox]").each(function(){var c=a(this),e=!1,f=c.attr(d.validationRuleAttribute);if(typeof f!="undefined"&&f==="required"){if(c.attr("type")=="checkbox")e=c.is(":checked");else{var j=c.attr("name");i.find("input[name="+j+"]").each(function(){if(a(this).is(":checked"))return e=!0,!1})}e||(g.push(b.requiredFields),h.push(c),c.attr("data-error",b.requiredFields))}}),a.formUtils.haltValidation=!1,i.find("input,textarea,select").each(function(){var c=a(this);if(!e(c.attr("name"),c.attr("type"))){a.formUtils.defaultBorderColor===null&&c.attr("type")&&(a.formUtils.defaultBorderColor=c.css("border-color"));var g=a.formUtils.validateInput(c,b,d,i);g!==!0&&(h.push(c),c.attr("data-error",g),f(g))}}),i.find("input,textarea,select").css("border-color",a.formUtils.defaultBorderColor).removeClass(d.errorElementClass),a("."+d.errorMessageClass).remove(),a(".jquery_form_error_message").remove();if(!a.formUtils.haltValidation&&h.length>0){for(var j=0;j<h.length;j++)d.borderColorOnError!==""&&h[j].css("border-color",d.borderColorOnError),h[j].addClass(d.errorElementClass);if(d.errorMessagePosition==="top"){var k="<strong>"+b.errorTitle+"</strong>";for(var j=0;j<g.length;j++)k+="<br />* "+g[j];i.children().eq(0).before('<p class="'+d.errorMessageClass+'">'+k+"</p>"),d.scrollToTopOnError&&a(window).scrollTop(i.offset().top-20)}else for(var j=0;j<h.length;j++){var l=h[j].parent(),m=l.find("span[class=jquery_form_error_message]");m.length>0?m.eq(0).text(h[j].attr("data-error")):l.append('<span class="jquery_form_error_message">'+h[j].attr("data-error")+"</span>")}return!1}return!a.formUtils.haltValidation},a.fn.restrictLength=function(b){return new a.formUtils.lengthRestriction(this,b),this},a.formUtils={defaultBorderColor:null,validators:{},haltValidation:!1,addValidator:function(a){this.validators[a.name]=a},loadModules:function(b,c){var d=function(b,c){a.each(b.split(","),function(b,d){var e=c+a.trim(d)+".js";a.ajax({url:e,cache:e.substr(-7)!=".dev.js",dataType:"script",async:!1,error:function(){throw new Error("Unable to load form validation module "+d)}})})};typeof c!="undefined"?d(b,c):a(function(){var e=a("script");for(var f=0;f<e.length;f++){var g=e.eq(f).attr("src"),h=g.substr(g.lastIndexOf("/")+1,g.length);if(h=="jquery.formvalidator.js"||h=="jquery.formvalidator.min.js"){c=g.substr(0,g.lastIndexOf("/"))+"/",c=="/"&&(c="");break}}d(b,c)})},validateInput:function(b,c,d,e){var f=a.trim(b.val()),g=b.attr(d.validationRuleAttribute);if(typeof g!="undefined"&&g!==null){var h=g.split(" ");for(var i=0;i<h.length;i++){var j=a.formUtils.validators[h[i]];if(typeof j!="undefined"){var k=j.validate(f,b,d,c,e);if(!k){var l=b.attr("data-error-message");return typeof l=="undefined"&&(l=c[j.errorMessageKey],typeof l=="undefined"&&(l=j.errorMessage)),l}}}}return!0},getAttributeInteger:function(a,b){var c=new RegExp("("+b+"[0-9-]+)","g");return a.match(c)[0].replace(/[^0-9\-]/g,"")},parseDate:function(b,c){var d=c.replace(/[a-zA-Z]/gi,"").substring(0,1),e="^",f=c.split(d);for(var g=0;g<f.length;g++)e+=(g>0?"\\"+d:"")+"(\\d{"+f[g].length+"})";e+="$";var h=b.match(new RegExp(e));if(h===null)return!1;var i=function(b,c,d){for(var e=0;e<c.length;e++)if(c[e].substring(0,1)===b)return a.formUtils.parseDateInt(d[e+1]);return-1},j=i("m",f,h),k=i("d",f,h),l=i("y",f,h);return j===2&&k>28&&(l%4!==0||l%100===0&&l%400!==0)||j===2&&k>29&&(l%4===0||l%100!==0&&l%400===0)||j>12||j===0?!1:this.isShortMonth(j)&&k>30||!this.isShortMonth(j)&&k>31||k===0?!1:[l,j,k]},parseDateInt:function(a){return a.indexOf("0")===0&&(a=a.replace("0","")),parseInt(a,10)},isShortMonth:function(a){return a%2===0&&a<7||a%2!==0&&a>7},lengthRestriction:function(b,c){this.input=b,this.maxLength=parseInt(c.text(),10);var d=this;a(this.input).keyup(function(){var b=a(this),e=b.val();b.val(e.substring(0,d.maxLength));var f=d.maxLength-e.length;f<0&&(f=0),c.text(f)}).focus(function(){a(this).keyup()}).trigger("keyup")},LANG:{errorTitle:"Form submission failed!",requiredFields:"You have not answered all required fields",badTime:"You have not given a correct time",badEmail:"You have not given a correct e-mail address",badTelephone:"You have not given a correct phone number",badSecurityAnswer:"You have not given a correct answer to the security question",badDate:"You have not given a correct date",toLongStart:"You have given an answer longer than ",toLongEnd:" characters",toShortStart:"You have given an answer shorter than ",toShortEnd:" characters",badLength:"You have to give an answer between ",notConfirmed:"Values could not be confirmed",badDomain:"Incorrect domain value",badUrl:"Incorrect url value",badFloat:"Incorrect float value",badCustomVal:"You gave an incorrect answer",badInt:"Incorrect integer value",badSecurityNumber:"Your social security number was incorrect",badUKVatAnswer:"Incorrect UK VAT Number",badStrength:"The password isn't strong enough"}},a.formUtils.addValidator({name:"validate_email",validate:function(b){var c=/^([a-zA-Z0-9_\.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(c.test(b)){var d=b.split("@");if(d.length==2)return a.formUtils.validators.validate_domain.validate(d[1])}return!1},errorMessage:"",errorMessageKey:"badEmail"}),a.formUtils.addValidator({name:"validate_domain",validate:function(a){a=a.replace("ftp://","").replace("https://","").replace("http://","").replace("www.","");var b=new Array(".com",".net",".org",".biz",".coop",".info",".museum",".name",".pro",".edu",".gov",".int",".mil",".ac",".ad",".ae",".af",".ag",".ai",".al",".am",".an",".ao",".aq",".ar",".as",".at",".au",".aw",".az",".ba",".bb",".bd",".be",".bf",".bg",".bh",".bi",".bj",".bm",".bn",".bo",".br",".bs",".bt",".bv",".bw",".by",".bz",".ca",".cc",".cd",".cf",".cg",".ch",".ci",".ck",".cl",".cm",".cn",".co",".cr",".cu",".cv",".cx",".cy",".cz",".de",".dj",".dk",".dm",".do",".dz",".ec",".ee",".eg",".eh",".er",".es",".et",".fi",".fj",".fk",".fm",".fo",".fr",".ga",".gd",".ge",".gf",".gg",".gh",".gi",".gl",".gm",".gn",".gp",".gq",".gr",".gs",".gt",".gu",".gv",".gy",".hk",".hm",".hn",".hr",".ht",".hu",".id",".ie",".il",".im",".in",".io",".iq",".ir",".is",".it",".je",".jm",".jo",".jp",".ke",".kg",".kh",".ki",".km",".kn",".kp",".kr",".kw",".ky",".kz",".la",".lb",".lc",".li",".lk",".lr",".ls",".lt",".lu",".lv",".ly",".ma",".mc",".md",".mg",".mh",".mk",".ml",".mm",".mn",".mo",".mp",".mq",".mr",".ms",".mt",".mu",".mv",".mw",".mx",".my",".mz",".na",".nc",".ne",".nf",".ng",".ni",".nl",".no",".np",".nr",".nu",".nz",".om",".pa",".pe",".pf",".pg",".ph",".pk",".pl",".pm",".pn",".pr",".ps",".pt",".pw",".py",".qa",".re",".ro",".rw",".ru",".sa",".sb",".sc",".sd",".se",".sg",".sh",".si",".sj",".sk",".sl",".sm",".sn",".so",".sr",".st",".sv",".sy",".sz",".tc",".td",".tf",".tg",".th",".tj",".tk",".tm",".tn",".to",".tp",".tr",".tt",".tv",".tw",".tz",".ua",".ug",".uk",".um",".us",".uy",".uz",".va",".vc",".ve",".vg",".vi",".vn",".vu",".ws",".wf",".ye",".yt",".yu",".za",".zm",".zw",".me",".mobi",".xxx"),c=a.lastIndexOf("."),d=a.substring(0,c),e=a.substring(c,a.length),f=!1;for(var g=0;g<b.length;g++)if(b[g]===e){if(e!==".uk"){f=!0;break}var h=a.split("."),i=h[h.length-2],j=new Array("co","me","ac","gov","judiciary","ltd","mod","net","nhs","nic","org","parliament","plc","police","sch","bl","british-library","jet","nls");for(var k=0;k<j.length;k++)if(j[k]===i){f=!0;break}if(f)break}if(!f)return!1;if(c<2||c>57)return!1;var l=d.substring(0,1),m=d.substring(d.length-1,d.length);return l==="-"||l==="."||m==="-"||m==="."?!1:d.split(".").length>3||d.split("..").length>1?!1:d.replace(/[0-9a-z\.\-]/g,"")!==""?!1:!0},errorMessage:"",errorMessageKey:"badDomain"}),a.formUtils.addValidator({name:"required",validate:function(a){return a!==""},errorMessage:"",errorMessageKey:"requiredFields"}),a.formUtils.addValidator({name:"validate_min_length",validate:function(b,c,d,e){var f=c.attr(d.validationRuleAttribute),g=a.formUtils.getAttributeInteger(f,"length");return b.length<g?(this.errorMessage=e.toShortStart+g+e.toShortEnd,!1):!0},errorMessage:"",errorMessageKey:""}),a.formUtils.addValidator({name:"validate_max_length",validate:function(b,c,d,e){var f=c.attr(d.validationRuleAttribute),g=a.formUtils.getAttributeInteger(f,"length");return b.length>g?(this.errorMessage=e.toLongStart+g+e.toLongEnd,!1):!0},errorMessage:"",errorMessageKey:""}),a.formUtils.addValidator({name:"validate_length",validate:function(b,c,d,e){var f=c.attr(d.validationRuleAttribute),g=a.formUtils.getAttributeInteger(f,"length"),h=g.split("-");return b.length<parseInt(h[0],10)||b.length>parseInt(h[1],10)?(this.errorMessage=e.badLength+g+e.toLongEnd,!1):!0},errorMessage:"",errorMessageKey:""}),a.formUtils.addValidator({name:"validate_url",validate:function(b){var c=/^(https|http|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|\[|\]|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;if(c.test(b)){var d=b.split(/^https|^http|^ftp/i)[1].replace("://",""),e=d.indexOf("/");return e>-1&&(d=d.substr(0,e)),a.formUtils.validators.validate_domain.validate(d)}return!1},errorMessage:"",errorMessageKey:"badUrl"}),a.formUtils.addValidator({name:"validate_number",validate:function(b){return a.formUtils.validators.validate_int.validate(b)||a.formUtils.validators.validate_float.validate(b)},errorMessage:"",errorMessageKey:"badInt"}),a.formUtils.addValidator({name:"validate_custom",validate:function(a,b,c){var d=b.attr(c.validationRuleAttribute),e=new RegExp(d.split("regexp/")[1].split("/")[0]);return e.test(a)},errorMessage:"",errorMessageKey:"badCustomVal"}),a.formUtils.addValidator({name:"validate_int",validate:function(a){return a!==""&&a.replace(/[0-9]/g,"")===""},errorMessage:"",errorMessageKey:"badInt"}),a.formUtils.addValidator({name:"validate_float",validate:function(a){return a.match(/^(\-|)([0-9]+)\.([0-9]+)$/)!==null},errorMessage:"",errorMessageKey:"badFloat"}),a.formUtils.addValidator({name:"validate_date",validate:function(b,c,d){var e="yyyy-mm-dd";return c.attr("data-format")?e=c.attr("data-format"):typeof d.dateFormat!="undefined"&&(e=d.dateFormat),a.formUtils.parseDate(b,e)!==!1},errorMessage:"",errorMessageKey:"badDate"}),a.formUtils.addValidator({name:"validate_phone",validate:function(a){var b=a.match(/\+/g),c=a.match(/-/g);return b!==null&&b.length>1||c!==null&&c.length>1?!1:b!==null&&a.indexOf("+")!==0?!1:(a=a.replace(/([-|\+])/g,""),a.length>8&&a.match(/[^0-9]/g)===null)},errorMessage:"",errorMessageKey:"badTelephone"})})(jQuery);